{% macro header() -%}
<a class="navbar-brand" href="{{ url_for('blog.bloglist') }}" style="color:#EB5424;">{{_('Blog')}}</a>
{%- endmacro %}

{% macro headerlist() -%}
<ul class="nav navbar-nav">
    <li> <a href="{{ url_for('index.index') }}">{{_( 'HOME' )}}</a></li>
    {% set categories = get_all_category() %}
    {% for category in categories -%}
    <li><a href="{{ url_for('blog.bloglist',category=category.name) }}">{{ category.name }}</a></li>
    {%- endfor %}
    <li> <a href="{{ url_for('blog.archive') }}">Archives</a></li>
    <li> <a href="{{ url_for('blog.rss') }}">RSS</a></li>
</ul>
{%- endmacro %}

{% macro tags() -%}
{% set all_tags = get_all_tags() %}
{% for tag in all_tags %}
<span class="label label-primary" style="display: inline-block;">
    {%  set category = request.args.get('category') %}
    <a href="{{ url_for('blog.bloglist',category=category,tag=tag.name) }}" style="color:#fff;">{{ tag.name }}</a>
</span>
{% endfor %}
{%- endmacro %}

{% macro urls() -%}
<br />
<a href="http://honmaple.com">{{_('blog')}}</a>
<br />
<a href="http://honmaple.org" target="_blank">静态博客</a>
<br />
<a href="http://forums.honmaple.org" target="_blank">Honmaple论坛</a>
<br/>
<a href="http://honmaple.cn" target="_blank">flask练习</a>
<a href="http://flask.pocoo.org/" target="_blank">flask官网</a>
{%- endmacro %}

{% macro social() -%}
<br />
<a href="http://github.com/honmaple">GitHub</a>
{%- endmacro %}

{% macro blogpanel(blog) -%}
<h3><a href="{{ url_for('blog.blog',blogId=blog.id) }}" target=_blank>{{ blog.title }}</a></h3>
{{ blogheading(blog) }}
{{ blogcontent(blog.content) }}
{%- endmacro %}

{% macro blogheading(blog) -%}
{{ blogtime(blog.created_at) }}
| {{ blogtags(blog.tags) }} |
{{ blogread(blog.id) }}
{%- endmacro %}

{% macro blogtime(time) -%}
<span class="glyphicon glyphicon-calendar" aria-hidden="true" title="{{_('publish')}}"></span>:
<small style="color:#999">{{ time | timesince }} </small>
{%- endmacro %}

{% macro blogtags(tags) -%}
<span class="glyphicon glyphicon-tags" aria-hidden="true"  title="{{_('tags')}}"></span> :
{%- for tag in tags -%}
<small><a href="{{ url_for('blog.bloglist',tag=tag.name) }}" style="color:#eb5424;">{{ tag.name }}</a></small>
{% endfor -%}
{%- endmacro %}

{% macro blogread(id) -%}
<span class="glyphicon glyphicon-book" aria-hidden="true"  title="{{_('read')}}"></span>:
<small style="color:#999">{{ id | visit_total }}</small>
{%- endmacro %}

{% macro blogcontent(content) -%}
<span class="content">
    {{ content | truncate(255, True)| safe_markdown }}
</span>
{%- endmacro %}

{% macro blogdetail(blog) -%}
<h2 class="text-center">{{ blog.title }}</h2>
<!-- <div style="border-bottom:1px dotted #000000;"></div> -->
<footer style="float:right;">
    <abbr class="published" title="{{ blog.created_at }}">
        {{ blog.created_at | timesince }}
    </abbr>
    <address>
        By <a href="">{{ blog.author.username }}</a>
    </address>
    <address>
        tags: <a href="./tag/python/">python</a>
    </address>
</footer>
<div class="blog-content" style="font-size:16px;">
    {{ blog.content | safe_markdown }}
    {%- if blog.is_copy == False -%}
    <div style="border-bottom:1px dashed #000000;width:60%;"></div>
    版权所有,转载请注明出处及作者
    {%- endif -%}
</div>
{%- endmacro %}
